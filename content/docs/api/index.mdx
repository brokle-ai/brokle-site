---
title: API Reference
description: Complete REST API reference for Brokle - authentication, endpoints, and error handling
---

import { Cards, Card } from "fumadocs-ui/components/card";
import { Callout } from "fumadocs-ui/components/callout";
import { Tabs, Tab } from "fumadocs-ui/components/tabs";

# API Reference

The Brokle REST API provides programmatic access to all platform features. This reference documents authentication, endpoints, request/response formats, and error handling.

## Base URL

All API requests should be made to:

```
https://api.brokle.com
```

For self-hosted deployments, replace with your server URL.

## API Architecture

Brokle provides two distinct API interfaces:

<Cards>
  <Card
    title="SDK API"
    description="For telemetry ingestion from your applications using API keys"
    href="#sdk-api"
  />
  <Card
    title="Dashboard API"
    description="For dashboard operations using JWT authentication"
    href="#dashboard-api"
  />
</Cards>

### SDK API

**Base Path**: `/v1/*`

Used by SDKs for telemetry ingestion. Authenticated via API keys.

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/v1/traces` | POST | Ingest OTLP telemetry data |
| `/v1/metrics` | POST | Ingest OTLP metrics data |
| `/v1/logs` | POST | Ingest OTLP log data |
| `/v1/scores` | POST | Submit evaluation scores |
| `/v1/prompts/{name}` | GET | Fetch prompt by name |

### Dashboard API

**Base Path**: `/api/v1/*`

Used by the dashboard for management operations. Authenticated via JWT tokens.

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/v1/auth/*` | Various | Authentication operations |
| `/api/v1/organizations/*` | Various | Organization management |
| `/api/v1/projects/*` | Various | Project management |
| `/api/v1/traces/*` | Various | Trace queries and management |
| `/api/v1/analytics/*` | Various | Metrics and reporting |

## Quick Start

### 1. Get Your API Key

API keys are created in the Brokle dashboard under **Settings → API Keys**.

```
bk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### 2. Make Your First Request

<Tabs>
  <Tab value="curl" label="cURL">
    ```bash
    curl -X POST https://api.brokle.com/v1/traces \
      -H "Content-Type: application/json" \
      -H "X-API-Key: bk_your_api_key" \
      -d '{
        "resourceSpans": [{
          "resource": {
            "attributes": [
              {"key": "service.name", "value": {"stringValue": "my-app"}}
            ]
          },
          "scopeSpans": [{
            "spans": [{
              "traceId": "abc123...",
              "spanId": "def456...",
              "name": "chat_completion",
              "startTimeUnixNano": "1700000000000000000",
              "endTimeUnixNano": "1700000001000000000"
            }]
          }]
        }]
      }'
    ```
  </Tab>
  <Tab value="python" label="Python">
    ```python
    import requests

    response = requests.post(
        "https://api.brokle.com/v1/traces",
        headers={
            "Content-Type": "application/json",
            "X-API-Key": "bk_your_api_key"
        },
        json={
            "resourceSpans": [{
                "resource": {
                    "attributes": [
                        {"key": "service.name", "value": {"stringValue": "my-app"}}
                    ]
                },
                "scopeSpans": [{
                    "spans": [{
                        "traceId": "abc123...",
                        "spanId": "def456...",
                        "name": "chat_completion",
                        "startTimeUnixNano": "1700000000000000000",
                        "endTimeUnixNano": "1700000001000000000"
                    }]
                }]
            }]
        }
    )

    print(response.json())
    ```
  </Tab>
  <Tab value="javascript" label="JavaScript">
    ```javascript
    const response = await fetch('https://api.brokle.com/v1/traces', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'X-API-Key': 'bk_your_api_key'
      },
      body: JSON.stringify({
        resourceSpans: [{
          resource: {
            attributes: [
              { key: 'service.name', value: { stringValue: 'my-app' } }
            ]
          },
          scopeSpans: [{
            spans: [{
              traceId: 'abc123...',
              spanId: 'def456...',
              name: 'chat_completion',
              startTimeUnixNano: '1700000000000000000',
              endTimeUnixNano: '1700000001000000000'
            }]
          }]
        }]
      })
    });

    const data = await response.json();
    console.log(data);
    ```
  </Tab>
</Tabs>

## Request Format

### Headers

| Header | Required | Description |
|--------|----------|-------------|
| `Content-Type` | Yes | Always `application/json` |
| `X-API-Key` | Yes* | API key for SDK endpoints |
| `Authorization` | Yes* | `Bearer {token}` for Dashboard endpoints |

*One of `X-API-Key` or `Authorization` is required depending on endpoint.

### Request Body

All request bodies should be valid JSON:

```json
{
  "field": "value",
  "nested": {
    "object": true
  },
  "array": [1, 2, 3]
}
```

## Response Format

### Success Response

```json
{
  "success": true,
  "data": {
    // Response data
  }
}
```

### Paginated Response

```json
{
  "success": true,
  "data": [
    // Array of items
  ],
  "meta": {
    "request_id": "req_01h2x3y4z5",
    "timestamp": "2024-01-15T10:30:00Z",
    "version": "v1",
    "pagination": {
      "page": 1,
      "limit": 50,
      "total": 150,
      "total_pages": 3,
      "has_next": true,
      "has_prev": false
    }
  }
}
```

### Error Response

```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid request body",
    "details": [
      {
        "field": "name",
        "message": "Name is required"
      }
    ]
  }
}
```

## Rate Limiting

API requests are rate limited to ensure fair usage:

| Plan | Requests/minute | Burst |
|------|-----------------|-------|
| Free | 60 | 100 |
| Pro | 600 | 1000 |
| Enterprise | Custom | Custom |

Rate limit headers are included in every response:

```
X-RateLimit-Limit: 60
X-RateLimit-Remaining: 45
X-RateLimit-Reset: 1700000060
```

When rate limited, you'll receive a `429 Too Many Requests` response:

```json
{
  "error": {
    "code": "RATE_LIMITED",
    "message": "Too many requests. Please retry after 60 seconds.",
    "retryAfter": 60
  }
}
```

## Pagination

List endpoints support pagination via query parameters:

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `page` | integer | 1 | Page number (1-indexed) |
| `limit` | integer | 50 | Items per page (max 100) |
| `sort_by` | string | varies | Field to sort by |
| `sort_dir` | string | `desc` | `asc` or `desc` |

Example:

```
GET /api/v1/traces?page=2&limit=50&sort_by=startTime&sort_dir=desc
```

## Filtering

List endpoints support filtering via query parameters:

```
GET /api/v1/traces?projectId=proj_123&startTime=2024-01-01T00:00:00Z&endTime=2024-01-31T23:59:59Z
```

Common filter parameters:

| Parameter | Type | Description |
|-----------|------|-------------|
| `projectId` | string | Filter by project |
| `startTime` | ISO 8601 | Start of time range |
| `endTime` | ISO 8601 | End of time range |
| `status` | string | Filter by status |

## OTLP Compatibility

Brokle is fully compatible with OpenTelemetry Protocol (OTLP). You can send traces using any OTLP-compatible exporter:

```python
from opentelemetry.exporter.otlp.proto.http.trace_exporter import OTLPSpanExporter

exporter = OTLPSpanExporter(
    endpoint="https://api.brokle.com/v1/traces",
    headers={"X-API-Key": "bk_your_api_key"}
)
```

## SDK vs Direct API

<Callout type="info">
  We recommend using the official SDKs instead of calling the API directly. SDKs handle batching, retries, and serialization automatically.
</Callout>

| Feature | SDK | Direct API |
|---------|-----|------------|
| Automatic batching | ✅ | Manual |
| Retry logic | ✅ | Manual |
| Type safety | ✅ | Manual |
| Compression | ✅ | Manual |
| Context propagation | ✅ | Manual |

## API Sections

<Cards>
  <Card
    title="Authentication"
    description="API key management and JWT authentication"
    href="/docs/api/authentication"
  />
  <Card
    title="Traces API"
    description="Ingest and query trace data"
    href="/docs/api/endpoints/traces"
  />
  <Card
    title="Spans API"
    description="Query and manage individual spans"
    href="/docs/api/endpoints/spans"
  />
  <Card
    title="Metrics API"
    description="Ingest OTLP metrics for GenAI performance monitoring"
    href="/docs/api/endpoints/metrics"
  />
  <Card
    title="Logs API"
    description="Ingest OTLP logs with trace correlation"
    href="/docs/api/endpoints/logs"
  />
  <Card
    title="Evaluations API"
    description="Submit and query evaluation scores"
    href="/docs/api/endpoints/evaluations"
  />
  <Card
    title="Projects API"
    description="Project management operations"
    href="/docs/api/endpoints/projects"
  />
  <Card
    title="Error Reference"
    description="Error codes and troubleshooting"
    href="/docs/api/errors"
  />
</Cards>

## Next Steps

- [Authentication →](/docs/api/authentication)
- [Traces API →](/docs/api/endpoints/traces)
- [Python SDK →](/docs/sdk/python)
- [JavaScript SDK →](/docs/sdk/javascript)
