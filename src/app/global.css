@import 'tailwindcss';
@import 'fumadocs-ui/css/neutral.css';
@import 'fumadocs-ui/css/preset.css';

@custom-variant dark (&:is(.dark *));

:root {
  --radius: 0.625rem;
  --fd-nav-height: 56px;

  /* Base - Pure neutrals (0 chroma) */
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);

  /* Card */
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);

  /* Popover */
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);

  /* Primary - Neutral (for standard UI elements) */
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);

  /* Brand - Blue (for CTAs and accents) */
  --brand: oklch(0.55 0.18 255);
  --brand-foreground: oklch(0.985 0 0);

  /* Secondary */
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);

  /* Muted */
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);

  /* Accent */
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);

  /* Destructive */
  --destructive: oklch(0.577 0.245 27.325);

  /* Success */
  --success: oklch(0.648 0.150 160);
  --success-foreground: oklch(1 0 0);

  /* Warning */
  --warning: oklch(0.769 0.188 70.08);
  --warning-foreground: oklch(0.145 0 0);

  /* Border & Input */
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);

  /* =====================================================
     Visual Polish - Gradients, Shadows, Glows
     ===================================================== */

  /* Hero gradient - subtle blue/purple tint */
  --gradient-hero-start: oklch(0.97 0.015 250);
  --gradient-hero-end: oklch(0.98 0.01 300);

  /* Code block - dark gradient for premium feel */
  --code-bg-start: oklch(0.14 0 0);
  --code-bg-end: oklch(0.18 0.005 250);
  --code-border: oklch(0.3 0 0);

  /* Enhanced shadows */
  --shadow-card: 0 1px 3px oklch(0 0 0 / 4%), 0 4px 12px oklch(0 0 0 / 3%);
  --shadow-card-hover: 0 4px 16px oklch(0 0 0 / 8%), 0 12px 32px oklch(0 0 0 / 5%);
  --shadow-code: 0 8px 32px oklch(0 0 0 / 25%), 0 2px 8px oklch(0 0 0 / 15%);

  /* Brand glow effect */
  --brand-glow: 0 0 24px oklch(0.55 0.18 255 / 25%);
  --brand-glow-strong: 0 0 40px oklch(0.55 0.18 255 / 35%);
}

.dark {
  /* Base */
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);

  /* Card */
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);

  /* Popover */
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);

  /* Primary - Neutral (inverted for dark mode) */
  --primary: oklch(0.985 0 0);
  --primary-foreground: oklch(0.205 0 0);

  /* Brand - Blue (brighter for dark mode) */
  --brand: oklch(0.65 0.16 250);
  --brand-foreground: oklch(0.985 0 0);

  /* Secondary */
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);

  /* Muted */
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);

  /* Accent */
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);

  /* Destructive */
  --destructive: oklch(0.704 0.191 22.216);

  /* Success */
  --success: oklch(0.696 0.17 162.48);
  --success-foreground: oklch(1 0 0);

  /* Warning */
  --warning: oklch(0.769 0.188 70.08);
  --warning-foreground: oklch(0.145 0 0);

  /* Border & Input */
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);

  /* Visual Polish - Dark mode variants */
  --gradient-hero-start: oklch(0.16 0.01 250);
  --gradient-hero-end: oklch(0.14 0.005 300);
  --code-bg-start: oklch(0.10 0 0);
  --code-bg-end: oklch(0.14 0.005 250);
  --code-border: oklch(0.25 0 0);
  --shadow-card: 0 1px 3px oklch(0 0 0 / 20%), 0 4px 12px oklch(0 0 0 / 15%);
  --shadow-card-hover: 0 4px 16px oklch(0 0 0 / 30%), 0 12px 32px oklch(0 0 0 / 20%);
  --shadow-code: 0 8px 32px oklch(0 0 0 / 40%), 0 2px 8px oklch(0 0 0 / 25%);
  --brand-glow: 0 0 24px oklch(0.65 0.16 250 / 30%);
  --brand-glow-strong: 0 0 40px oklch(0.65 0.16 250 / 45%);
}

/* =====================================================
   Fumadocs Color Variable Mapping

   Map Fumadocs' fd-* variables to project color system.
   This ensures Fumadocs components (Cards, etc.) use our
   theme colors instead of their default gray neutrals.
   ===================================================== */

:root {
  /* Map Fumadocs muted colors to project colors */
  --color-fd-muted: var(--muted);
  --color-fd-muted-foreground: var(--muted-foreground);

  /* Map Fumadocs card colors */
  --color-fd-card: var(--card);
  --color-fd-card-foreground: var(--card-foreground);

  /* Map Fumadocs background/foreground */
  --color-fd-background: var(--background);
  --color-fd-foreground: var(--foreground);

  /* Map Fumadocs border */
  --color-fd-border: var(--border);
}

.dark {
  --color-fd-muted: var(--muted);
  --color-fd-muted-foreground: var(--muted-foreground);
  --color-fd-card: var(--card);
  --color-fd-card-foreground: var(--card-foreground);
  --color-fd-background: var(--background);
  --color-fd-foreground: var(--foreground);
  --color-fd-border: var(--border);
}

/* =====================================================
   Fumadocs Card Icon Enhancement

   Card icons should be more prominent than description text.
   Use foreground color instead of muted-foreground for icons.
   ===================================================== */

/* Target card icon wrapper - make icons darker/more visible */
[data-card] > div:first-child:has(svg) {
  color: var(--foreground);
}

@theme inline {
  /* Fonts */
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);

  /* Border Radius */
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  /* Color mappings */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);
  --color-warning: var(--warning);
  --color-warning-foreground: var(--warning-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-brand: var(--brand);
  --color-brand-foreground: var(--brand-foreground);

  /* Marquee animations */
  --animate-marquee: marquee var(--duration) linear infinite;
  --animate-marquee-vertical: marquee-vertical var(--duration) linear infinite;
}

/* Marquee keyframes */
@keyframes marquee {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(calc(-100% - var(--gap)));
  }
}

@keyframes marquee-vertical {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(calc(-100% - var(--gap)));
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* Navbar button styling - Get Started as brand color (Blue), Sign In as ghost */
/* Use high specificity to override Fumadocs buttonVariants */
header#nd-nav a[href*="signup"].inline-flex,
#nd-nav a[href*="signup"].inline-flex {
  --tw-bg-opacity: 1 !important;
  background-color: var(--brand) !important;
  color: var(--brand-foreground) !important;
  border-color: var(--brand) !important;
  border-width: 0 !important;
}

header#nd-nav a[href*="signup"].inline-flex:hover,
#nd-nav a[href*="signup"].inline-flex:hover {
  background-color: oklch(0.48 0.18 255) !important;
}

.dark header#nd-nav a[href*="signup"].inline-flex,
.dark #nd-nav a[href*="signup"].inline-flex {
  background-color: var(--brand) !important;
  color: var(--brand-foreground) !important;
  border-color: var(--brand) !important;
}

.dark header#nd-nav a[href*="signup"].inline-flex:hover,
.dark #nd-nav a[href*="signup"].inline-flex:hover {
  background-color: oklch(0.72 0.16 250) !important;
}

header#nd-nav a[href*="signin"].inline-flex,
#nd-nav a[href*="signin"].inline-flex {
  background-color: transparent !important;
  border-color: transparent !important;
  border-width: 0 !important;
}

header#nd-nav a[href*="signin"].inline-flex:hover,
#nd-nav a[href*="signin"].inline-flex:hover {
  background-color: oklch(0.97 0 0) !important;
}

.dark header#nd-nav a[href*="signin"].inline-flex:hover,
.dark #nd-nav a[href*="signin"].inline-flex:hover {
  background-color: oklch(0.269 0 0) !important;
}

/* Docs sidebar - match background color and remove border */
#nd-sidebar {
  background-color: var(--background) !important;
  border-right: none !important;
  border-inline-end: none !important;
}

.dark #nd-sidebar {
  background-color: var(--background) !important;
  border-right: none !important;
  border-inline-end: none !important;
}

/* Docs layout offset - account for navbar (56px) + tabs (48px) */
:root {
  --docs-header-height: 104px;
}

/* Fix TOC "On this page" scrolling under navbar + tabs */
#nd-toc {
  top: var(--docs-header-height) !important;
  height: calc(100vh - var(--docs-header-height)) !important;
}

/* Fix TOC popover (mobile) positioning */
[data-toc-popover] {
  top: var(--docs-header-height) !important;
}

/* =====================================================
   Fumadocs Sidebar Theming - Blue Brand Color

   Fumadocs uses --color-fd-primary for active states:
   - data-[active=true]:bg-fd-primary/10 (background)
   - data-[active=true]:text-fd-primary (text)

   And --color-fd-accent for hover states:
   - hover:bg-fd-accent/50

   We override these within #nd-sidebar scope to apply
   blue brand color only to sidebar (not affecting other
   Fumadocs components).
   ===================================================== */

/* Light mode: Blue brand for sidebar */
#nd-sidebar {
  --color-fd-primary: oklch(0.50 0.22 255);
  --color-fd-accent: oklch(0.60 0.18 255 / 15%);
}

/* Dark mode: Brighter blue for sidebar */
.dark #nd-sidebar {
  --color-fd-primary: oklch(0.70 0.20 250);
  --color-fd-accent: oklch(0.60 0.16 250 / 25%);
}

/* Make active sidebar item bold */
#nd-sidebar [data-active="true"] {
  font-weight: 600;
}

/* Make sidebar section headers (separators and folder triggers) bold */
#nd-sidebar p.mt-6,
#nd-sidebar button[data-radix-collapsible-trigger] {
  font-weight: 600;
}

/* TOC (On this page) - Blue brand color for active state */
#nd-toc {
  --color-fd-primary: oklch(0.50 0.22 255);
}

.dark #nd-toc {
  --color-fd-primary: oklch(0.70 0.20 250);
}

/* TOC container - ensure indicator bar can be positioned */
#nd-toc [class*="border-s"] {
  position: relative;
}

/* TOC vertical indicator bar (TocThumb) - ensure visibility */
#nd-toc [class*="bg-fd-primary"][class*="w-px"] {
  width: 2px !important;
  background-color: var(--color-fd-primary) !important;
}

/* TOC left border line */
#nd-toc .border-s {
  border-left-color: oklch(0.5 0 0 / 15%);
}

.dark #nd-toc .border-s {
  border-left-color: oklch(0.8 0 0 / 15%);
}

/* =====================================================
   Shiki Syntax Highlighting - Dual Theme Support

   Using defaultColor: false, Shiki outputs CSS variables only:
   - --shiki-light / --shiki-dark (text colors)
   - --shiki-light-bg / --shiki-dark-bg (backgrounds)
   ===================================================== */

/* Light mode (default) */
.shiki,
.shiki span {
  color: var(--shiki-light);
  background-color: transparent !important;
}

/* Dark mode */
.dark .shiki,
.dark .shiki span {
  color: var(--shiki-dark);
  background-color: transparent !important;
}

